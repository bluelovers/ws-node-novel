{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by user on 2019/5/29.\n */\n\nimport getMinMidMax from 'blank-line';\nimport crlf, { LF } from 'crlf-normalize';\nimport { envVal, envBool } from 'env-bool';\nimport StrUtil = require('str-util');\n\nexport const SP_KEY = \"#_@_#\";\nexport const SP_REGEXP = \"(?:@|（·?）|-|/|\\\\(\\\\)|%|￥|_|\\\\?|？|\\\\||#|\\\\$|[（\\\\(](?:和谐|河蟹)[\\\\)）]|（河）（蟹）|[（\\\\(][河蟹]{1,2}[\\\\)）]| |\\\\.|[・·]|\\\\*|□|圌|[=＝]|\\\\\\\\\\\\\\\\|\\\\/\\\\/|｜)\";\n\nexport interface IOptions\n{\n\twords?: boolean\n\tpad_eng?: boolean\n}\n\nexport interface IWordsOutput\n{\n\t_source?: any,\n\n\ts?: RegExp,\n\tr?: string | IRegExpCallback,\n\n\tflags?: string,\n}\n\nexport interface IRegExpCallback\n{\n\t($0: string, $1?: string, $2?: string, $3?: string, ...argv): string;\n}\n\nexport interface IToStrOptions\n{\n\tLF?: string,\n\tallow_nbsp?: boolean,\n\tallow_bom?: boolean,\n}\n\nexport interface ITextLayoutOptions extends IToStrOptions\n{\n\tallow_lf2?: boolean,\n\tallow_lf3?: boolean,\n}\n\nexport class enspace\n{\n\tpublic _cache_ = {\n\t\treplace: [],\n\t\twords: new Map(),\n\t};\n\tpublic _data_ = {\n\t\tm0: /([^a-z0-9\\-\\.\\s])?([a-z0-9\\-\\.]+(?:[a-z0-9\\-\\.\\s]+[a-z0-9\\-\\.]+)?)([^a-z0-9\\-\\.\\s])?/uig,\n\t\tr1: /[「」①→\\'\\\":\\-\\+（）╮（╯＿╰）╭\\(\\)\\[\\]■【】《》~～“”‘’:：：，*＊@。ω・、。`　─一\\d『』◆~、？！\\?\\!×\\.\\<\\>=…・]/i,\n\n\t\trtrim: /[ \\t\\uFEFF\\xA0　]+$/,\n\n\t\twords: [\n\t\t\t/*\n\t\t\t{\n\t\t\t\ts: '（·）',\n\t\t\t\tr: '',\n\t\t\t},\n\t\t\t*/\n\t\t\t{\n\t\t\t\ts: /\\.{3}/g,\n\t\t\t\tr: '…',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /…\\.{1,2}/g,\n\t\t\t\tr: '……',\n\t\t\t},\n\n\t\t\t/*\n\t\t\t{\n\t\t\t\ts: /(第)(?:[\\_\\t\\uFEFF\\xA0　]+)(\\d+)(?:[\\_\\t\\uFEFF\\xA0　]+)(话|頁|夜|章)/g,\n\t\t\t\tr: '$1 $2 $3',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /(第)(?:[\\_\\t\\uFEFF\\xA0　]+)?(\\d+)(?:[\\_\\t\\uFEFF\\xA0　]+)(话|頁|夜|章)/g,\n\t\t\t\tr: '$1 $2 $3',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /(第)(?:[\\_\\t\\uFEFF\\xA0　]+)(\\d+)(?:[\\_\\t\\uFEFF\\xA0　]+)?(话|頁|夜|章)/g,\n\t\t\t\tr: '$1 $2 $3',\n\t\t\t},\n\t\t\t*/\n\t\t\t{\n\t\t\t\ts: /(话|日|章)[\\_\\t\\uFEFF\\xA0]+/ig,\n\t\t\t\tr: '$1 ',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: '！　',\n\t\t\t\tr: '！',\n\n\t\t\t\tno_regex: false,\n\t\t\t},\n\t\t\t/*\n\t\t\t{\n\t\t\t\tr: /([「」【】《》『』（）])/ig,\n\t\t\t\ts: '$1',\n\t\t\t},\n\t\t\t*/\n\t\t\t/*\n\t\t\t{\n\t\t\t\ts: /(\\?\\?)[ \\t　]+(\\?\\?)/ig,\n\t\t\t\tr: '$1$2',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /「([^「『』」]+)?『([^\\n』]+)」([^「『』」]+)?』/,\n\t\t\t\tr: '「$1『$2』$3」',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /『([^「『』」]+)?「([^\\n」]+)』([^「『』」]+)?」/,\n\t\t\t\tr: '『$1「$2」$3』',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /情\\s*se\\s*小说/ig,\n\t\t\t\tr: '情色小说',\n\t\t\t},\n\t\t\t*/\n\t\t\t{\n\t\t\t\ts: /^([^「『“”』」]+)?(“)([^「『“”』」]+)[』」]([^”]+)?$/m,\n\t\t\t\tr: '$1$2$3”$4',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /，——/g,\n\t\t\t\tr: '——',\n\t\t\t},\n\t\t\t{\n\t\t\t\ts: /(?:話|话)/ug,\n\t\t\t\tr: '話',\n\t\t\t},\n\t\t\t[/　[ \\t]+（/g, '　（'],\n\n\t\t\t//['製止', '制止'],\n\n\t\t\t//['預防性雞鴨', '預防性羈押'],\n\n\t\t\t//['查水[錶表]', '查水錶'],\n\n\t\t] as IWordsOutput[],\n\n\t};\n\tpublic options = {};\n\n\tpublic _words_r1 = SP_REGEXP;\n\n\tconstructor(options?)\n\t{\n\t\tlet _self = this;\n\n\t\tlet r = this._words_r1;\n\n\t\tlet arr = []\n\t\t\t.concat(options && options.words_block ? options.words_block : null)\n\t\t;\n\n\t\tthis._data_.words = this._words1(arr, this._data_.words);\n\t\tthis._data_.words = this._words2(this._data_.words);\n\t}\n\n\tstatic create(...argv)\n\t{\n\t\treturn new this(...argv);\n\t}\n\n\t_words1(arr: string[], words = []): IWordsOutput[]\n\t{\n\t\tlet r = this._words_r1;\n\n\t\tarr\n\t\t\t.filter(function (el, index, arr)\n\t\t\t{\n\t\t\t\treturn el && (index == arr.indexOf(el));\n\t\t\t})\n\t\t\t.forEach(function (value)\n\t\t\t{\n\t\t\t\tlet a = value.split('@');\n\n\t\t\t\t/*\n\t\t\t\t_self._data_.words.push({\n\t\t\t\t\ts: new RegExp(`(${a[0]})${r}(${a[1]})`, 'g'),\n\t\t\t\t\tr: '$1$2',\n\t\t\t\t});\n\t\t\t\t*/\n\n\t\t\t\tlet s = a.join(`)${r}(`);\n\n\t\t\t\twords.push({\n\t\t\t\t\ts: new RegExp(`(${s})`, 'g'),\n\t\t\t\t\tr: a.map(function (value, index, array)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn '$' + (index + 1);\n\t\t\t\t\t}).join(''),\n\t\t\t\t});\n\t\t\t})\n\t\t;\n\n\t\treturn words;\n\t}\n\n\t_words2(words): IWordsOutput[]\n\t{\n\t\tlet r = this._words_r1;\n\n\t\treturn words.map(function (value, index, array)\n\t\t{\n\t\t\t// @ts-ignore\n\t\t\tif (value.no_regex)\n\t\t\t{\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (Array.isArray(value) && (value.length == 2 || value.length >= 3))\n\t\t\t{\n\t\t\t\tvalue = {\n\t\t\t\t\t_source: value,\n\n\t\t\t\t\ts: value[0],\n\t\t\t\t\tr: value[1],\n\n\t\t\t\t\tflags: value[2],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (typeof value.s == 'string' && (value.s as string).match(new RegExp(`${SP_KEY}(.+)$`)))\n\t\t\t{\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (!value._source) value._source = value.s;\n\n\t\t\t\tlet a = value.s.split(SP_KEY);\n\t\t\t\tlet s = a.join(`)${r}(`);\n\n\t\t\t\tvalue.s = new RegExp(`(${s})`, value.flags ? value.flags : 'g');\n\n\t\t\t\t//console.log(value.s);\n\n\t\t\t\tif (value.r === null)\n\t\t\t\t{\n\t\t\t\t\tvalue.r = a.map(function (value, index, array)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn '$' + (index + 1);\n\t\t\t\t\t}).join('');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof value.s == 'string')\n\t\t\t{\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (!value._source) value._source = value.s;\n\n\t\t\t\tvalue.s = new RegExp(value.s, value.flags ? value.flags : 'g');\n\t\t\t}\n\t\t\telse if (Array.isArray(value) && value.length == 1 && typeof value[0] == 'function')\n\t\t\t{\n\t\t\t\tvalue = value[0];\n\t\t\t}\n\t\t\telse if (typeof value.fn == 'function')\n\t\t\t{\n\t\t\t\tvalue = value.fn;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t});\n\t}\n\n\treplace(text, options: IOptions = {}): string\n\t{\n\t\tif (!text || !/[^\\s]/.test(text))\n\t\t{\n\t\t\treturn text;\n\t\t}\n\n\t\tlet _self = this;\n\n\t\tlet _ret = this.toStr(text)\n\t\t\t.replace(_self._data_.rtrim, '')\n\t\t;\n\n\t\tif (options.pad_eng)\n\t\t{\n\t\t\t_ret = this.paddingEng(_ret);\n\t\t}\n\n\t\tif (options.words)\n\t\t{\n\t\t\t_ret = this.replace_words(_ret, _self._data_.words, _self._cache_.words).value;\n\t\t}\n\n\t\treturn _ret;\n\t}\n\n\treplace_words(_ret, words: IWordsOutput[], _cache_words?)\n\t{\n\t\tif (!_cache_words)\n\t\t{\n\t\t\t_cache_words = new Map();\n\t\t}\n\n\t\tfor (let i in words)\n\t\t{\n\t\t\tlet _new;\n\n\t\t\tif (typeof words[i] == 'function')\n\t\t\t{\n\t\t\t\t_new = (words[i] as Function)(_ret, _cache_words);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet _r = words[i].s;\n\n\t\t\t\t_new = _ret.replace(_r, words[i].r);\n\t\t\t}\n\n\t\t\tif (_new != _ret)\n\t\t\t{\n\t\t\t\tlet myMap = [];\n\n\t\t\t\tif (_cache_words.has(words[i]))\n\t\t\t\t{\n\t\t\t\t\tmyMap = _cache_words.get(words[i]);\n\t\t\t\t}\n\n\t\t\t\tmyMap.push({\n\t\t\t\t\told: _ret,\n\t\t\t\t\tnew: _new,\n\t\t\t\t});\n\n\t\t\t\t_cache_words.set(words[i], myMap);\n\n\t\t\t\t_ret = _new;\n\t\t\t}\n\n\t\t\tif (!/[^\\s]/.test(_ret))\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: _ret as string,\n\t\t\tcache: _cache_words,\n\t\t};\n\t}\n\n\tpaddingEng(text: string)\n\t{\n\t\tlet _self = this;\n\n\t\treturn this.toStr(text)\n\t\t\t.replace(_self._data_.m0, function (...argv)\n\t\t\t{\n\t\t\t\tif (argv[2])\n\t\t\t\t{\n\t\t\t\t\tlet old = argv[2];\n\n\t\t\t\t\tif (argv[2].length > 1 && argv[1] && !_self._data_.r1.test(argv[1]))\n\t\t\t\t\t{\n\t\t\t\t\t\targv[2] = ' ' + argv[2];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (argv[3] && !_self._data_.r1.test(argv[3]))\n\t\t\t\t\t{\n\t\t\t\t\t\targv[2] = argv[2] + ' ';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (old != argv[2])\n\t\t\t\t\t{\n\t\t\t\t\t\t_self._cache_.replace.push({\n\t\t\t\t\t\t\told: old,\n\t\t\t\t\t\t\tnew: argv[2],\n\n\t\t\t\t\t\t\tdata: argv,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t//console.debug([old, argv[2]], argv);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (argv[1] || '') + argv[2].replace(/( ){2,}/g, '$1') + (argv[3] || '');\n\t\t\t\t}\n\n\t\t\t\treturn argv[0];\n\t\t\t})\n\t\t\t;\n\t}\n\n\tclearLF(text: string)\n\t{\n\t\treturn this.trim(text)\n\t\t\t.replace(/\\n{4,}/g, '\\n\\n')\n\t\t\t.replace(/\\n{3,}/g, '\\n\\n')\n\t\t\t;\n\t}\n\n\ttrim(text: Buffer, options?): string\n\ttrim(text: string, options?): string\n\ttrim(text: number, options?): string\n\ttrim(text, options?): string\n\t{\n\t\tlet ret = this.toStr(text, options)\n\t\t\t.replace(/[ \\t　\\xA0\\u3000]+\\n/g, '\\n')\n\t\t\t.replace(/^\\n+|[\\s　\\xA0\\u3000]+$/g, '')\n\t\t;\n\n\t\tif (typeof options == 'boolean')\n\t\t{\n\t\t\toptions = {\n\t\t\t\ttrim: !!options,\n\t\t\t}\n\t\t}\n\t\telse if (typeof options == 'string')\n\t\t{\n\t\t\toptions = {\n\t\t\t\ttrim: options,\n\t\t\t}\n\t\t}\n\n\t\tif (options)\n\t\t{\n\t\t\tif (typeof options.trim == 'string')\n\t\t\t{\n\t\t\t\tret = StrUtil.trim(ret, '　' + options.trim);\n\t\t\t}\n\t\t\telse if (options.trim)\n\t\t\t{\n\t\t\t\tret = StrUtil.trim(ret, '　');\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\ttoStr(str: Buffer | string | number | any, options?: IToStrOptions): string\n\ttoStr(str: Buffer | string | number | any, options?: string): string\n\ttoStr(str, options?: string | IToStrOptions): string\n\t{\n\t\tif (typeof options == 'string')\n\t\t{\n\t\t\toptions = {\n\t\t\t\tLF: options,\n\t\t\t};\n\t\t}\n\n\t\toptions = Object.assign({\n\t\t\tLF: \"\\n\",\n\t\t\tallow_nbsp: false,\n\t\t\tallow_bom: false,\n\t\t}, options);\n\n\t\tlet ret = crlf(str.toString(), options.LF || LF)\n\t\t\t//.replace(/\\r\\n|\\r(?!\\n)|\\n/g, options.LF || \"\\n\")\n\t\t\t// http://www.charbase.com/202a-unicode-left-to-right-embedding\n\n\t\t\t/*\n\t\t\t.replace(/[\\u2000-\\u200F]/g, '')\n\t\t\t.replace(/[\\u2028-\\u202F]/g, '')\n\t\t\t.replace(/[\\u205F-\\u2060]/g, '')\n\t\t\t*/\n\t\t;\n\n\t\tret = StrUtil.normalize(ret, options);\n\n\t\t/*\n\t\tif (!options.allow_bom)\n\t\t{\n\t\t\tret = ret.replace(/\\uFEFF/g, '');\n\t\t}\n\n\t\tif (!options.allow_nbsp)\n\t\t{\n\t\t\tret = ret.replace(/[  \\xA0]/g, ' ');\n\t\t}\n\t\t*/\n\n\t\treturn ret;\n\t}\n\n\tfixOptions(options: ITextLayoutOptions)\n\t{\n\t\tObject.entries(options)\n\t\t\t.forEach(([k, v]) => options[k] = envVal(v))\n\t\t;\n\n\t\treturn options;\n\t}\n\n\treduceLine<T>(html: T, options: ITextLayoutOptions = {})\n\t{\n\t\toptions = this.fixOptions(options);\n\n\t\tif (options.allow_lf2)\n\t\t{\n\t\t\treturn html;\n\t\t}\n\n\t\tlet old = this.trim(html as any as string, options);\n\n\t\told = //html\n\t\t\t\t\t//.replace(/\\r\\n|\\r(?!\\n)/g, \"\\n\")\n\t\t\told\n\t\t\t\t.replace(/[ 　\\t]+\\n/g, \"\\n\")\n\t\t\t\t.replace(/[\\s　]+$/g, '')\n\t\t\t\t.replace(/^[\\n \\t]+/g, '')\n\t\t\t\t.replace(/\\n{4,}/g, \"\\n\\n\\n\\n\")\n\t\t;\n\n\t\tlet _html = old;\n\n\t\tif (!_html.match(/[^\\n]\\n[^\\n]/g))\n\t\t{\n\t\t\tlet [min, mid, max] = getMinMidMax(_html.toString());\n\n\t\t\tif (min > 2)\n\t\t\t{\n\t\t\t\toptions.allow_lf2 = false;\n\t\t\t}\n\n\t\t\tif (max >= 3)\n\t\t\t{\n\t\t\t\tif (min > 2)\n\t\t\t\t{\n\t\t\t\t\tlet r = new RegExp(`\\\\n{${min - 1}}(\\\\n+)`, 'g');\n\n\t\t\t\t\t_html = _html\n\t\t\t\t\t//.replace(/\\n{2}(\\n*)/g, '$1')\n\t\t\t\t\t\t.replace(r, '$1')\n\t\t\t\t\t;\n\t\t\t\t}\n\n\t\t\t\t_html = _html\n\t\t\t\t\t.replace(/\\n{3,}/g, \"\\n\\n\\n\")\n\t\t\t\t//.replace(/\\n{2}/g, \"\\n\")\n\t\t\t\t;\n\t\t\t}\n\n\t\t\t//console.log(options);\n\n\t\t\tif (!options.allow_lf2)\n\t\t\t{\n\t\t\t\t_html = _html\n\t\t\t\t\t.replace(/\\n\\n/g, \"\\n\")\n\t\t\t\t;\n\t\t\t}\n\n\t\t\tif (_html != old)\n\t\t\t{\n\t\t\t\treturn _html;\n\t\t\t}\n\t\t}\n\n\t\treturn html;\n\t}\n\n\t/**\n\t * 通用型段落調整\n\t *\n\t * @returns {string}\n\t */\n\ttextlayout(html, options: ITextLayoutOptions = {}): string\n\t{\n\t\toptions = this.fixOptions(options);\n\n\t\thtml = this.trim(html, options);\n\n\t\thtml = //html\n\t\t\t//.replace(/\\r\\n|\\r(?!\\n)/g, \"\\n\")\n\t\t\thtml\n\t\t\t\t.replace(/[ 　\\t]+\\n/g, \"\\n\")\n\t\t\t\t.replace(/[\\s　]+$/g, '')\n\t\t\t\t.replace(/^[\\n \\t]+/g, '')\n\t\t\t\t.replace(/\\n{4,}/g, \"\\n\\n\\n\\n\")\n\t\t;\n\n\t\tif (!html.match(/[^\\n]\\n[^\\n]/g))\n\t\t{\n\t\t\tlet [min, mid, max] = getMinMidMax(html.toString());\n\n\t\t\tif (min > 2)\n\t\t\t{\n\t\t\t\toptions.allow_lf2 = false;\n\t\t\t}\n\n\t\t\tif (max >= 3)\n\t\t\t{\n\t\t\t\tif (min > 2)\n\t\t\t\t{\n\t\t\t\t\tlet r = new RegExp(`\\\\n{${min - 1}}(\\\\n+)`, 'g');\n\n\t\t\t\t\thtml = html\n\t\t\t\t\t//.replace(/\\n{2}(\\n*)/g, '$1')\n\t\t\t\t\t\t.replace(r, '$1')\n\t\t\t\t\t;\n\t\t\t\t}\n\n\t\t\t\thtml = html\n\t\t\t\t\t.replace(/\\n{3,}/g, \"\\n\\n\\n\")\n\t\t\t\t//.replace(/\\n{2}/g, \"\\n\")\n\t\t\t\t;\n\t\t\t}\n\n\t\t\t//console.log(options);\n\n\t\t\tif (!options.allow_lf2)\n\t\t\t{\n\t\t\t\thtml = html\n\t\t\t\t\t.replace(/\\n\\n/g, \"\\n\")\n\t\t\t\t;\n\t\t\t}\n\t\t}\n\n\t\thtml = html\n\t\t// for ts\n\t\t\t.toString()\n\t\t\t.replace(/([^\\n「」【】《》“”『』（）\\[\\]\"](?:[！？?!。]*)?)\\n((?:[—]+)?[「」“”【】《》（）『』])/ug, \"$1\\n\\n$2\")\n\n\t\t\t.replace(/([「」【】《》“”『』（）―\\[\\]\"](?:[！？?!。]*)?)\\n((?:　*)[^\\n「」“”【】《》（）『』])/ug, \"$1\\n\\n$2\")\n\t\t\t.replace(/([^\\n「」【】《》“”『』（）\\[\\]\"≪≫](?:[！？?!。]*)?)\\n((?:[—]+)?[≪≫「」“”【】《》（）『』])/ug, \"$1\\n\\n$2\")\n\n\t\t\t.replace(/([「」【】《》“”『』（）―\\[\\]\"](?:[！？?!。]*)?)\\n((?:　*)[^\\n「」“”【】《》（）『』])/ug, \"$1\\n\\n$2\")\n\n\t\t\t.replace(/(）(?:[！？?!。]*)?)\\n([「」【】《》『』“”])/ug, \"$1\\n\\n$2\")\n\n\t\t\t/**\n\t\t\t * https://tieba.baidu.com/p/5400503864\n\t\t\t *\n\t\t\t * 「第三试炼也，多亏了妮露而通过了吗……」\n\t\t\t 『心神守护的白羽毛』，这个从妮露那里收到的护身符，确实地守护了我的心。\n\n\t\t\t */\n\t\t\t.replace(/([「」【】《》“”『』（）―](?:[！？?!。]*)?)\\n((?:[「」“”【】《》（）『』])(?:[^\\n]+)([^\\n「」【】《》“”『』（）―](?:[！？?!。]*)?)\\n)/ug, \"$1\\n$2\\n\")\n\n\t\t\t/**\n\t\t\t * 住手，住手，我就是我。不是其他的任何人。\n\t\t\t 　表示出要必死地进行抵抗的意志，但是侵入脑内的这个『什么东西』，并不能被阻止。不能被，阻止……\n\t\t\t */\n\t\t\t.replace(/(\\n(?:[^　\\n][^\\n]+))\\n([　])/g, '$1\\n\\n$2')\n\n\t\t\t/**\n\t\t\t * 这样一直在这高兴着\n\n\t\t\t 。\n\t\t\t */\n\t\t\t//.replace(/([^\\n])(\\n+)((?:[吧呢]*)?[。！？，、])\\n/ug, \"$1$3$2\")\n\n\t\t\t.replace(/([^\\n])(\\n+)(fin|\\<完\\>)(\\n|$)/ig, \"$1$2\\n$3$4\")\n\t\t;\n\n\t\thtml = html\n\t\t\t.replace(/^\\n+|[\\s　]+$/g, '')\n\t\t\t/*\n\t\t\t.replace(/(\\n){4,}/g, \"\\n\\n\\n\\n\")\n\t\t\t.replace(/(\\n){3}/g, \"\\n\\n\")\n\t\t\t*/\n\t\t\t.replace(/(\\n){4,}/g, \"\\n\\n\\n\\n\")\n\n\t\t;\n\n\t\tif (options.allow_lf3)\n\t\t{\n\t\t\thtml = html\n\t\t\t\t.replace(/(\\n){3,}/g, \"\\n\\n\\n\")\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\thtml = html\n\t\t\t\t.replace(/(\\n){3}/g, \"\\n\\n\")\n\t\t\t;\n\t\t}\n\n\t\treturn html;\n\t}\n\n}\n"]}