"use strict";
/**
 * Created by user on 2020/1/4.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const fullhalf_1 = require("str-util/lib/fullhalf");
const tags_1 = require("./tags");
function _fixRubyInnerContext(innerContext) {
    let fn = _replaceHtmlTag(($0, $1, $2, $3) => {
        return `<${$1}${$2}>${$3}</${$1}>`;
    });
    return innerContext
        .replace(tags_1.reHtmlRubyRt, fn)
        .replace(tags_1.reHtmlRubyRp, fn);
}
exports._fixRubyInnerContext = _fixRubyInnerContext;
function _replaceHtmlTag(replacer) {
    return ($0, $1, $2, ...argv) => {
        $1 = fullhalf_1.toHalfWidth($1);
        $2 = fullhalf_1.toHalfWidth($2);
        return replacer($0, $1, $2, ...argv);
    };
}
exports._replaceHtmlTag = _replaceHtmlTag;
function _convertHtmlTag001(input) {
    return input
        .replace(new RegExp("&lt;|\\u003C|\uFF1C" /* OPEN */, 'ig'), '<')
        .replace(new RegExp("&gt;|\\u003E|\uFF1E" /* CLOSE */, 'ig'), '>');
}
exports._convertHtmlTag001 = _convertHtmlTag001;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUVILG9EQUFvRDtBQUNwRCxpQ0FBaUU7QUFFakUsU0FBZ0Isb0JBQW9CLENBQUMsWUFBb0I7SUFFeEQsSUFBSSxFQUFFLEdBQUcsZUFBZSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUU7UUFFM0MsT0FBTyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFBO0lBQ25DLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxZQUFZO1NBQ2pCLE9BQU8sQ0FBQyxtQkFBWSxFQUFFLEVBQUUsQ0FBQztTQUN6QixPQUFPLENBQUMsbUJBQVksRUFBRSxFQUFFLENBQUMsQ0FDekI7QUFDSCxDQUFDO0FBWEQsb0RBV0M7QUFFRCxTQUFnQixlQUFlLENBQUMsUUFBNEQ7SUFFM0YsT0FBTyxDQUFDLEVBQVUsRUFBRSxFQUFVLEVBQUUsRUFBVSxFQUFFLEdBQUcsSUFBYyxFQUFFLEVBQUU7UUFHaEUsRUFBRSxHQUFHLHNCQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckIsRUFBRSxHQUFHLHNCQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFckIsT0FBTyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQTtJQUNyQyxDQUFDLENBQUE7QUFDRixDQUFDO0FBVkQsMENBVUM7QUFFRCxTQUFnQixrQkFBa0IsQ0FBQyxLQUFhO0lBRS9DLE9BQU8sS0FBSztTQUNWLE9BQU8sQ0FBQyxJQUFJLE1BQU0sbUNBQW1CLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQztTQUNoRCxPQUFPLENBQUMsSUFBSSxNQUFNLG9DQUFvQixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FDakQ7QUFDSCxDQUFDO0FBTkQsZ0RBTUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDIwLzEvNC5cbiAqL1xuXG5pbXBvcnQgeyB0b0hhbGZXaWR0aCB9IGZyb20gJ3N0ci11dGlsL2xpYi9mdWxsaGFsZic7XG5pbXBvcnQgeyByZUh0bWxSdWJ5UnQsIHJlSHRtbFJ1YnlScCwgRW51bUh0bWxUYWcgfSBmcm9tICcuL3RhZ3MnO1xuXG5leHBvcnQgZnVuY3Rpb24gX2ZpeFJ1YnlJbm5lckNvbnRleHQoaW5uZXJDb250ZXh0OiBzdHJpbmcpXG57XG5cdGxldCBmbiA9IF9yZXBsYWNlSHRtbFRhZygoJDAsICQxLCAkMiwgJDMpID0+XG5cdHtcblx0XHRyZXR1cm4gYDwkeyQxfSR7JDJ9PiR7JDN9PC8keyQxfT5gXG5cdH0pO1xuXG5cdHJldHVybiBpbm5lckNvbnRleHRcblx0XHQucmVwbGFjZShyZUh0bWxSdWJ5UnQsIGZuKVxuXHRcdC5yZXBsYWNlKHJlSHRtbFJ1YnlScCwgZm4pXG5cdFx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3JlcGxhY2VIdG1sVGFnKHJlcGxhY2VyOiAoKHN1YnN0cmluZzogc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSkgPT4gc3RyaW5nKSlcbntcblx0cmV0dXJuICgkMDogc3RyaW5nLCAkMTogc3RyaW5nLCAkMjogc3RyaW5nLCAuLi5hcmd2OiBzdHJpbmdbXSkgPT5cblx0e1xuXG5cdFx0JDEgPSB0b0hhbGZXaWR0aCgkMSk7XG5cdFx0JDIgPSB0b0hhbGZXaWR0aCgkMik7XG5cblx0XHRyZXR1cm4gcmVwbGFjZXIoJDAsICQxLCAkMiwgLi4uYXJndilcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX2NvbnZlcnRIdG1sVGFnMDAxKGlucHV0OiBzdHJpbmcpXG57XG5cdHJldHVybiBpbnB1dFxuXHRcdC5yZXBsYWNlKG5ldyBSZWdFeHAoRW51bUh0bWxUYWcuT1BFTiwgJ2lnJyksICc8Jylcblx0XHQucmVwbGFjZShuZXcgUmVnRXhwKEVudW1IdG1sVGFnLkNMT1NFLCAnaWcnKSwgJz4nKVxuXHRcdDtcbn1cbiJdfQ==