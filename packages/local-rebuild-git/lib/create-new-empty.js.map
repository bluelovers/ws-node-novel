{"version":3,"file":"create-new-empty.js","sourceRoot":"","sources":["create-new-empty.ts"],"names":[],"mappings":";;AAAA,oCAAwC;AACxC,+BAAgC;AAGhC,+BAAgC;AAChC,kDAAyG;AACzG,6CAAqD;AACrD,iCAAkC;AAClC,yCAAyC;AAElC,KAAK,UAAU,cAAc,CAAC,GAAW;IAE/C,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oBAAY,CAAC,GAAG,CAAC,CAAC;IAE9C,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;IACvC,IAAI,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;IAEpD,cAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC9B,MAAM,EAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;IAElC,cAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;IACpC,MAAM,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC;IAE3C,MAAM,qBAAe,CAAC,KAAK,EAAE;QAC5B,MAAM;KACN,EAAE;QACF,KAAK,EAAE,SAAS;QAChB,GAAG;KACH,CAAC,CAAC;AACJ,CAAC;AAnBD,wCAmBC;AAEM,KAAK,UAAU,cAAc,CAAC,GAAW;IAE/C,IAAI,QAAQ,GAAG,UAAU,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;IAEnE,MAAM,0BAAiB,CAAC,QAAQ,EAAE;QACjC,GAAG;KACH,CAAC,CAAC;IAEH,cAAO,CAAC,IAAI,CAAC,kBAAkB,QAAQ,GAAG,CAAC,CAAC;AAC7C,CAAC;AATD,wCASC","sourcesContent":["import { git_get_user } from '../index';\nimport fs = require('fs-extra');\nimport CrossSpawn = require('cross-spawn-extra');\nimport Bluebird = require('bluebird');\nimport path = require('upath2');\nimport { checkGitOutput, crossSpawnSync, SpawnOptions, crossSpawnAsync } from '@git-lazy/util/spawn/git';\nimport { createEmptyBranch } from '@git-lazy/branch';\nimport moment = require('moment');\nimport { console } from '@git-lazy/util';\n\nexport async function _createMode001(cwd: string)\n{\n\tlet { name, email } = await git_get_user(cwd);\n\n\tlet _git_path = path.join(cwd, '.git');\n\tlet _git_path_backup = path.join(cwd, 'backup.git');\n\n\tconsole.info(`清除 backup.git`);\n\tawait fs.remove(_git_path_backup);\n\n\tconsole.info(`.git 更名為 backup.git`);\n\tawait fs.move(_git_path, _git_path_backup);\n\n\tawait crossSpawnAsync('git', [\n\t\t'init',\n\t], {\n\t\tstdio: 'inherit',\n\t\tcwd,\n\t});\n}\n\nexport async function _createMode002(cwd: string)\n{\n\tlet new_name = 'rebuild/' + moment().format('YYYY-MM-DD-HH-mm-ss');\n\n\tawait createEmptyBranch(new_name, {\n\t\tcwd,\n\t});\n\n\tconsole.info(`create branch \"${new_name}\"`);\n}\n"]}