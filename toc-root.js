"use strict";
/**
 * Created by user on 2018/11/14/014.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const array_hyper_unique_1 = require("array-hyper-unique");
const crlf_normalize_1 = require("crlf-normalize");
const FastGlob = require("fast-glob");
const path = require("upath2");
const BluebirdPromise = require("bluebird");
const fs = require("fs-extra");
const options_1 = require("node-novel-globby/lib/options");
const util_1 = require("./lib/util");
const toc_contents_1 = require("./toc_contents");
const sortObject = require("sort-object-keys2");
function searchByRoot(rootPath) {
    return BluebirdPromise.resolve(FastGlob.async([
        '!README.md',
        '!*/README.md',
        '!.*',
        '!docs',
        '*/*/**/README.md',
        '!*.new.*',
        '!*.out.*',
        '!*.raw',
        '!*.raw.*',
        '!.*',
        '!node_modules',
        '!out',
        '!raw',
    ], {
        cwd: rootPath,
        deep: 2,
    }))
        //.tap(v => console.info(v))
        .then(function (ls) {
        return filterList(ls.sort(), rootPath);
    })
        .tap(function (ls) {
        if (!ls.length) {
            console.warn(rootPath);
            return BluebirdPromise.reject(`list is empty`);
        }
    });
}
exports.searchByRoot = searchByRoot;
function isNovelID(dir, rootPath) {
    // @ts-ignore
    let _path = path.resolve(...[rootPath, path.dirname(dir)].filter(v => typeof v !== 'undefined'));
    return util_1.globFirst([
        '**/*.txt',
    ], {
        cwd: _path,
        absolute: true,
        ignore: options_1.defaultPatternsExclude,
    });
    //.tap(v => console.log(v))
}
exports.isNovelID = isNovelID;
function filterList(ls, rootPath) {
    return BluebirdPromise.reduce(ls, async function (arr, dir) {
        let dl = dir.split('/');
        if (dl.length > 3) {
            return arr;
        }
        if (!/_out$/.test(dl[0])) {
            let out = [dl[0] + '_out', ...dl.slice(1)];
            if (ls.includes(out.join('/'))) {
                return arr;
            }
        }
        let hasTxt = await isNovelID(dir, rootPath);
        if (hasTxt) {
            arr.push(dir);
        }
        return arr;
    }, [])
        .tap(function (ls) {
        if (!ls.length) {
            return BluebirdPromise.reject(`list is empty`);
        }
    });
}
exports.filterList = filterList;
function processDataByAuthor(ls, rootPath, options) {
    return BluebirdPromise.reduce(ls, async function (data, file) {
        let dl = file.split('/');
        let meta = await util_1.loadReadmeMeta(path.join(rootPath, file));
        let author = 'unknow';
        if (meta) {
            if (meta.novel) {
                if (meta.novel.author) {
                    author = meta.novel.author;
                }
                else if (meta.novel.authors && meta.novel.authors.length) {
                    author = meta.novel.authors[0];
                }
            }
        }
        else {
            return data;
        }
        data[author] = data[author] || {};
        let novelID = dl[1];
        data[author][novelID] = data[author][novelID] || [];
        data[author][novelID].push({
            novelID: dl[1],
            pathMain: dl[0],
            file,
            author,
            // @ts-ignore
            meta,
        });
        return data;
    }, {})
        .then(data => {
        sortObject(data, {
            sort: util_1.tocSortCallback,
            useSource: true,
        });
        Object.keys(data).forEach(function (author) {
            sortObject(data[author], {
                sort: util_1.tocSortCallback,
                useSource: true,
            });
        });
        let key = 'unknow';
        let old = data[key];
        delete data[key];
        if (old) {
            data[key] = old;
        }
        return data;
    });
}
exports.processDataByAuthor = processDataByAuthor;
function stringifyDataAuthor(data, rootPath, options) {
    let arr = [
        `# TOC\n`,
        `## Author\n`
    ];
    let arr_author = [];
    let authors = [];
    options = options || {};
    Object.entries(data)
        .forEach(function ([author, row], author_idx) {
        arr_author.push(`### ${author}\n`);
        authors.push(author);
        Object.entries(row)
            .forEach(function ([novelID, list]) {
            arr_author.push(`#### ${novelID}\n`);
            let skip = [
                novelID,
            ];
            let titles = [];
            let arr_item = [];
            list.forEach(function (item, index) {
                let link = path.dirname(item.file);
                let link2 = path.join(link, '導航目錄.md');
                if (fs.existsSync(path.join(rootPath, link2))) {
                    link = link2;
                }
                skip.push(novelID);
                let md = toc_contents_1.makeLink(`${novelID}`, link);
                let text = `- ${md} - *${item.pathMain}*`;
                if (options.cbForEachSubNovel) {
                    let ret = options.cbForEachSubNovel(text, item);
                    if (typeof ret === 'string') {
                        text = ret;
                    }
                }
                arr_item.push(text);
                titles = titles.concat(util_1.getNovelTitles(item.meta));
            });
            titles = array_hyper_unique_1.array_unique(titles)
                .filter(v => v && v != 'undefined')
                .filter(v => !skip.includes(v));
            if (titles.length) {
                arr_author.push(`> ${titles.join(' , ')}\n`);
            }
            arr_author = arr_author.concat(arr_item);
            arr_author.push(crlf_normalize_1.LF);
        });
    });
    let authors_anchor = authors.map(name => {
        return `[${util_1.md_link_escape(name)}](#${util_1.md_anchor_gitee(name)})`;
    }).join('\n  ／  ');
    arr.push(`> ${authors_anchor}\n`);
    arr = arr.concat(arr_author);
    arr.push(crlf_normalize_1.LF);
    return arr.join(crlf_normalize_1.LF);
}
exports.stringifyDataAuthor = stringifyDataAuthor;
function createTocRoot(_root, outputFile, options) {
    options = options || {};
    return searchByRoot(_root)
        .then(function (ls) {
        return processDataByAuthor(ls, _root, options);
    })
        .then(function (data) {
        return stringifyDataAuthor(data, _root, options);
    })
        .tap(function (v) {
        if (outputFile) {
            return fs.outputFile(outputFile, v);
        }
    });
}
exports.createTocRoot = createTocRoot;
exports.default = createTocRoot;
//createTocRoot('D:/Users/Documents/The Project/nodejs-test/node-novel2/dist_novel').tap(v => console.dir(v))
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9jLXJvb3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0b2Mtcm9vdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsMkRBQWtEO0FBQ2xELG1EQUFvQztBQUNwQyxzQ0FBc0M7QUFDdEMsK0JBQWdDO0FBQ2hDLDRDQUE2QztBQUM3QywrQkFBK0I7QUFFL0IsMkRBQXVFO0FBRXZFLHFDQVFvQjtBQUNwQixpREFBMEM7QUFDMUMsZ0RBQWlEO0FBR2pELFNBQWdCLFlBQVksQ0FBQyxRQUFnQjtJQUU1QyxPQUFPLGVBQWUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBUztRQUNwRCxZQUFZO1FBQ1osY0FBYztRQUNkLEtBQUs7UUFDTCxPQUFPO1FBQ1Asa0JBQWtCO1FBRWxCLFVBQVU7UUFDVixVQUFVO1FBQ1YsUUFBUTtRQUNSLFVBQVU7UUFDVixLQUFLO1FBQ0wsZUFBZTtRQUNmLE1BQU07UUFDTixNQUFNO0tBRU4sRUFBRTtRQUNGLEdBQUcsRUFBRSxRQUFRO1FBQ2IsSUFBSSxFQUFFLENBQUM7S0FDUCxDQUFDLENBQUM7UUFDSCw0QkFBNEI7U0FDM0IsSUFBSSxDQUFDLFVBQVUsRUFBRTtRQUVqQixPQUFPLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFDdkMsQ0FBQyxDQUFDO1NBQ0QsR0FBRyxDQUFDLFVBQVUsRUFBRTtRQUVoQixJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFDZDtZQUNDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFdkIsT0FBTyxlQUFlLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFBO1NBQzlDO0lBQ0YsQ0FBQyxDQUFDLENBQ0Q7QUFDSCxDQUFDO0FBckNELG9DQXFDQztBQUVELFNBQWdCLFNBQVMsQ0FBQyxHQUFXLEVBQUUsUUFBaUI7SUFFdkQsYUFBYTtJQUNiLElBQUksS0FBSyxHQUFXLElB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O0FBckJELHNDQXFCQztBQUVELGtCQUFlLGFBQWEsQ0FBQTtBQUU1Qiw2R0FBNkciLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE4LzExLzE0LzAxNC5cbiAqL1xuXG5pbXBvcnQgeyBhcnJheV91bmlxdWUgfSBmcm9tICdhcnJheS1oeXBlci11bmlxdWUnO1xuaW1wb3J0IHsgTEYgfSBmcm9tICdjcmxmLW5vcm1hbGl6ZSc7XG5pbXBvcnQgKiBhcyBGYXN0R2xvYiBmcm9tICdmYXN0LWdsb2InO1xuaW1wb3J0IHBhdGggPSByZXF1aXJlKCd1cGF0aDInKTtcbmltcG9ydCBCbHVlYmlyZFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMtZXh0cmEnO1xuaW1wb3J0ICogYXMgbm92ZWxHbG9iYnkgZnJvbSAnbm9kZS1ub3ZlbC1nbG9iYnkvZyc7XG5pbXBvcnQgeyBkZWZhdWx0UGF0dGVybnNFeGNsdWRlIH0gZnJvbSAnbm9kZS1ub3ZlbC1nbG9iYnkvbGliL29wdGlvbnMnO1xuaW1wb3J0IHsgSU1kY29uZk1ldGEgfSBmcm9tICdub2RlLW5vdmVsLWluZm8nO1xuaW1wb3J0IHtcblx0Z2xvYkZpcnN0LFxuXHRsb2FkUmVhZG1lTWV0YSxcblx0Z2V0Tm92ZWxUaXRsZXMsXG5cdG1kX2FuY2hvcl9naXRlZSxcblx0bWRfaHJlZixcblx0bWRfbGlua19lc2NhcGUsXG5cdHRvY1NvcnRDYWxsYmFjayxcbn0gZnJvbSAnLi9saWIvdXRpbCc7XG5pbXBvcnQgeyBtYWtlTGluayB9IGZyb20gJy4vdG9jX2NvbnRlbnRzJztcbmltcG9ydCBzb3J0T2JqZWN0ID0gcmVxdWlyZSgnc29ydC1vYmplY3Qta2V5czInKTtcbmltcG9ydCB7IGRlZmF1bHRTb3J0Q2FsbGJhY2ssIGNyZWF0ZVNvcnRDYWxsYmFjayB9IGZyb20gJ0Bub2RlLW5vdmVsL3NvcnQnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoQnlSb290KHJvb3RQYXRoOiBzdHJpbmcpXG57XG5cdHJldHVybiBCbHVlYmlyZFByb21pc2UucmVzb2x2ZShGYXN0R2xvYi5hc3luYzxzdHJpbmc+KFtcblx0XHRcdCchUkVBRE1FLm1kJyxcblx0XHRcdCchKi9SRUFETUUubWQnLFxuXHRcdFx0JyEuKicsXG5cdFx0XHQnIWRvY3MnLFxuXHRcdFx0JyovKi8qKi9SRUFETUUubWQnLFxuXG5cdFx0XHQnISoubmV3LionLFxuXHRcdFx0JyEqLm91dC4qJyxcblx0XHRcdCchKi5yYXcnLFxuXHRcdFx0JyEqLnJhdy4qJyxcblx0XHRcdCchLionLFxuXHRcdFx0JyFub2RlX21vZHVsZXMnLFxuXHRcdFx0JyFvdXQnLFxuXHRcdFx0JyFyYXcnLFxuXG5cdFx0XSwge1xuXHRcdFx0Y3dkOiByb290UGF0aCxcblx0XHRcdGRlZXA6IDIsXG5cdFx0fSkpXG5cdFx0Ly8udGFwKHYgPT4gY29uc29sZS5pbmZvKHYpKVxuXHRcdC50aGVuKGZ1bmN0aW9uIChscylcblx0XHR7XG5cdFx0XHRyZXR1cm4gZmlsdGVyTGlzdChscy5zb3J0KCksIHJvb3RQYXRoKVxuXHRcdH0pXG5cdFx0LnRhcChmdW5jdGlvbiAobHMpXG5cdFx0e1xuXHRcdFx0aWYgKCFscy5sZW5ndGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUud2Fybihyb290UGF0aCk7XG5cblx0XHRcdFx0cmV0dXJuIEJsdWViaXJkUHJvbWlzZS5yZWplY3QoYGxpc3QgaXMgZW1wdHlgKVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb3ZlbElEKGRpcjogc3RyaW5nLCByb290UGF0aD86IHN0cmluZylcbntcblx0Ly8gQHRzLWlnbm9yZVxuXHRsZXQgX3BhdGg6IHN0cmluZyA9IHBhdGgucmVzb2x2ZSguLi5bcm9vdFBhdGgsIHBhdGguZGlybmFtZShkaXIpXS5maWx0ZXIodiA9PiB0eXBlb2YgdiAhPT0gJ3VuZGVmaW5lZCcpKTtcblxuXHRyZXR1cm4gZ2xvYkZpcnN0KFtcblx0XHQnKiovKi50eHQnLFxuXHRcdC8vLi4uZGVmYXVsdFBhdHRlcm5zRXhjbHVkZSxcblx0XSwge1xuXHRcdGN3ZDogX3BhdGgsXG5cdFx0YWJzb2x1dGU6IHRydWUsXG5cdFx0aWdub3JlOiBkZWZhdWx0UGF0dGVybnNFeGNsdWRlLFxuXHR9KVxuXHQvLy50YXAodiA9PiBjb25zb2xlLmxvZyh2KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckxpc3QobHM6IHN0cmluZ1tdLCByb290UGF0aD86IHN0cmluZylcbntcblx0cmV0dXJuIEJsdWViaXJkUHJvbWlzZS5yZWR1Y2UobHMsIGFzeW5jIGZ1bmN0aW9uIChhcnIsIGRpcilcblx0XHR7XG5cdFx0XHRsZXQgZGwgPSBkaXIuc3BsaXQoJy8nKTtcblxuXHRcdFx0aWYgKGRsLmxlbmd0aCA+IDMpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBhcnI7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghL19vdXQkLy50ZXN0KGRsWzBdKSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IG91dCA9IFtkbFswXSArICdfb3V0JywgLi4uZGwuc2xpY2UoMSldO1xuXG5cdFx0XHRcdGlmIChscy5pbmNsdWRlcyhvdXQuam9pbignLycpKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBhcnI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0bGV0IGhhc1R4dCA9IGF3YWl0IGlzTm92ZWxJRChkaXIsIHJvb3RQYXRoKTtcblxuXHRcdFx0aWYgKGhhc1R4dClcblx0XHRcdHtcblx0XHRcdFx0YXJyLnB1c2goZGlyKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGFycjtcblx0XHR9LCBbXSBhcyBzdHJpbmdbXSlcblx0XHQudGFwKGZ1bmN0aW9uIChscylcblx0XHR7XG5cdFx0XHRpZiAoIWxzLmxlbmd0aClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIEJsdWViaXJkUHJvbWlzZS5yZWplY3QoYGxpc3QgaXMgZW1wdHlgKVxuXHRcdFx0fVxuXHRcdH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRGF0YUJ5QXV0aG9yPFQgZXh0ZW5kcyBJTWRjb25mTWV0YSA9IElNZGNvbmZNZXRhPihsczogc3RyaW5nW10sIHJvb3RQYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBJT3B0aW9uczxUPilcbntcblx0cmV0dXJuIEJsdWViaXJkUHJvbWlzZS5yZWR1Y2UobHMsIGFzeW5jIGZ1bmN0aW9uIChkYXRhLCBmaWxlKVxuXHRcdHtcblx0XHRcdGxldCBkbCA9IGZpbGUuc3BsaXQoJy8nKTtcblxuXHRcdFx0bGV0IG1ldGEgPSBhd2FpdCBsb2FkUmVhZG1lTWV0YShwYXRoLmpvaW4ocm9vdFBhdGgsIGZpbGUpKTtcblxuXHRcdFx0bGV0IGF1dGhvciA9ICd1bmtub3cnO1xuXG5cdFx0XHRpZiAobWV0YSlcblx0XHRcdHtcblx0XHRcdFx0aWYgKG1ldGEubm92ZWwpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAobWV0YS5ub3ZlbC5hdXRob3IpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YXV0aG9yID0gbWV0YS5ub3ZlbC5hdXRob3Jcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAobWV0YS5ub3ZlbC5hdXRob3JzICYmIG1ldGEubm92ZWwuYXV0aG9ycy5sZW5ndGgpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YXV0aG9yID0gbWV0YS5ub3ZlbC5hdXRob3JzWzBdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHRkYXRhW2F1dGhvcl0gPSBkYXRhW2F1dGhvcl0gfHwge307XG5cblx0XHRcdGxldCBub3ZlbElEID0gZGxbMV07XG5cblx0XHRcdGRhdGFbYXV0aG9yXVtub3ZlbElEXSA9IGRhdGFbYXV0aG9yXVtub3ZlbElEXSB8fCBbXTtcblxuXHRcdFx0ZGF0YVthdXRob3JdW25vdmVsSURdLnB1c2goe1xuXHRcdFx0XHRub3ZlbElEOiBkbFsxXSxcblx0XHRcdFx0cGF0aE1haW46IGRsWzBdLFxuXHRcdFx0XHRmaWxlLFxuXHRcdFx0XHRhdXRob3IsXG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0bWV0YSxcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9LCB7fSBhcyBJRGF0YUF1dGhvcjxUPilcblx0XHQudGhlbihkYXRhID0+XG5cdFx0e1xuXG5cdFx0XHRzb3J0T2JqZWN0KGRhdGEsIHtcblx0XHRcdFx0c29ydDogdG9jU29ydENhbGxiYWNrLFxuXHRcdFx0XHR1c2VTb3VyY2U6IHRydWUsXG5cdFx0XHR9KTtcblxuXHRcdFx0T2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoYXV0aG9yKVxuXHRcdFx0e1xuXHRcdFx0XHRzb3J0T2JqZWN0KGRhdGFbYXV0aG9yXSwge1xuXHRcdFx0XHRcdHNvcnQ6IHRvY1NvcnRDYWxsYmFjayxcblx0XHRcdFx0XHR1c2VTb3VyY2U6IHRydWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdGxldCBrZXkgPSAndW5rbm93Jztcblx0XHRcdGxldCBvbGQgPSBkYXRhW2tleV07XG5cblx0XHRcdGRlbGV0ZSBkYXRhW2tleV07XG5cblx0XHRcdGlmIChvbGQpXG5cdFx0XHR7XG5cdFx0XHRcdGRhdGFba2V5XSA9IG9sZDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fSlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGF0YUF1dGhvcjxUIGV4dGVuZHMgSU1kY29uZk1ldGEgPSBJTWRjb25mTWV0YT5cbntcblx0W2F1dGhvcjogc3RyaW5nXTogSURhdGFBdXRob3JOb3ZlbDxUPixcblx0dW5rbm93PzogSURhdGFBdXRob3JOb3ZlbDxUPixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGF0YUF1dGhvck5vdmVsPFQgZXh0ZW5kcyBJTWRjb25mTWV0YSA9IElNZGNvbmZNZXRhPlxue1xuXHRbbm92ZWxJRDogc3RyaW5nXTogSURhdGFBdXRob3JOb3ZlbEl0ZW08VD5bXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEYXRhQXV0aG9yTm92ZWxJdGVtPFQgZXh0ZW5kcyBJTWRjb25mTWV0YSA9IElNZGNvbmZNZXRhPlxue1xuXHRub3ZlbElEOiBzdHJpbmcsXG5cdHBhdGhNYWluOiBzdHJpbmcsXG5cdGZpbGU6IHN0cmluZyxcblx0YXV0aG9yOiBzdHJpbmcgfCAndW5rbm93Jyxcblx0bWV0YTogVCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJT3B0aW9uczxUIGV4dGVuZHMgSU1kY29uZk1ldGE+XG57XG5cdGNiRm9yRWFjaFN1Yk5vdmVsPyh0ZXh0OiBzdHJpbmcsIGl0ZW06IElEYXRhQXV0aG9yTm92ZWxJdGVtPFQ+KTogdm9pZCB8IHN0cmluZyxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeURhdGFBdXRob3I8VCBleHRlbmRzIElNZGNvbmZNZXRhID0gSU1kY29uZk1ldGE+KGRhdGE6IElEYXRhQXV0aG9yPFQ+LCByb290UGF0aDogc3RyaW5nLCBvcHRpb25zPzogSU9wdGlvbnM8VD4pXG57XG5cdGxldCBhcnIgPSBbXG5cdFx0YCMgVE9DXFxuYCxcblx0XHRgIyMgQXV0aG9yXFxuYFxuXHRdO1xuXG5cdGxldCBhcnJfYXV0aG9yOiBzdHJpbmdbXSA9IFtdO1xuXG5cdGxldCBhdXRob3JzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdE9iamVjdC5lbnRyaWVzKGRhdGEpXG5cdFx0LmZvckVhY2goZnVuY3Rpb24gKFthdXRob3IsIHJvd10sIGF1dGhvcl9pZHgpXG5cdFx0e1xuXHRcdFx0YXJyX2F1dGhvci5wdXNoKGAjIyMgJHthdXRob3J9XFxuYCk7XG5cblx0XHRcdGF1dGhvcnMucHVzaChhdXRob3IpO1xuXG5cdFx0XHRPYmplY3QuZW50cmllcyhyb3cpXG5cdFx0XHRcdC5mb3JFYWNoKGZ1bmN0aW9uIChbbm92ZWxJRCwgbGlzdF0pXG5cdFx0XHRcdHtcblxuXHRcdFx0XHRcdGFycl9hdXRob3IucHVzaChgIyMjIyAke25vdmVsSUR9XFxuYCk7XG5cblx0XHRcdFx0XHRsZXQgc2tpcCA9IFtcblx0XHRcdFx0XHRcdG5vdmVsSUQsXG5cdFx0XHRcdFx0XTtcblxuXHRcdFx0XHRcdGxldCB0aXRsZXMgPSBbXTtcblxuXHRcdFx0XHRcdGxldCBhcnJfaXRlbSA9IFtdO1xuXG5cdFx0XHRcdFx0bGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRsZXQgbGluayA9IHBhdGguZGlybmFtZShpdGVtLmZpbGUpO1xuXG5cdFx0XHRcdFx0XHRsZXQgbGluazIgPSBwYXRoLmpvaW4obGluaywgJ+WwjuiIquebrumMhC5tZCcpO1xuXG5cdFx0XHRcdFx0XHRpZiAoZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4ocm9vdFBhdGgsIGxpbmsyKSkpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGxpbmsgPSBsaW5rMlxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRza2lwLnB1c2gobm92ZWxJRCk7XG5cblx0XHRcdFx0XHRcdGxldCBtZCA9IG1ha2VMaW5rKGAke25vdmVsSUR9YCwgbGluayk7XG5cblx0XHRcdFx0XHRcdGxldCB0ZXh0ID0gYC0gJHttZH0gLSAqJHtpdGVtLnBhdGhNYWlufSpgO1xuXG5cdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5jYkZvckVhY2hTdWJOb3ZlbClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bGV0IHJldCA9IG9wdGlvbnMuY2JGb3JFYWNoU3ViTm92ZWwodGV4dCwgaXRlbSk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiByZXQgPT09ICdzdHJpbmcnKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dGV4dCA9IHJldDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRhcnJfaXRlbS5wdXNoKHRleHQpO1xuXG5cdFx0XHRcdFx0XHR0aXRsZXMgPSB0aXRsZXMuY29uY2F0KGdldE5vdmVsVGl0bGVzKGl0ZW0ubWV0YSkpXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR0aXRsZXMgPSBhcnJheV91bmlxdWUodGl0bGVzKVxuXHRcdFx0XHRcdFx0LmZpbHRlcih2ID0+IHYgJiYgdiAhPSAndW5kZWZpbmVkJylcblx0XHRcdFx0XHRcdC5maWx0ZXIodiA9PiAhc2tpcC5pbmNsdWRlcyh2KSlcblx0XHRcdFx0XHQ7XG5cblx0XHRcdFx0XHRpZiAodGl0bGVzLmxlbmd0aClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRhcnJfYXV0aG9yLnB1c2goYD4gJHt0aXRsZXMuam9pbignICwgJyl9XFxuYCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YXJyX2F1dGhvciA9IGFycl9hdXRob3IuY29uY2F0KGFycl9pdGVtKTtcblxuXHRcdFx0XHRcdGFycl9hdXRob3IucHVzaChMRik7XG5cdFx0XHRcdH0pXG5cdFx0XHQ7XG5cdFx0fSlcblx0O1xuXG5cdGxldCBhdXRob3JzX2FuY2hvciA9IGF1dGhvcnMubWFwKG5hbWUgPT4ge1xuXHRcdHJldHVybiBgWyR7bWRfbGlua19lc2NhcGUobmFtZSl9XSgjJHttZF9hbmNob3JfZ2l0ZWUobmFtZSl9KWA7XG5cdH0pLmpvaW4oJ1xcbiAg77yPICAnKTtcblxuXHRhcnIucHVzaChgPiAke2F1dGhvcnNfYW5jaG9yfVxcbmApO1xuXG5cdGFyciA9IGFyci5jb25jYXQoYXJyX2F1dGhvcik7XG5cblx0YXJyLnB1c2goTEYpO1xuXG5cdHJldHVybiBhcnIuam9pbihMRilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRvY1Jvb3Q8VCBleHRlbmRzIElNZGNvbmZNZXRhID0gSU1kY29uZk1ldGE+KF9yb290OiBzdHJpbmcsIG91dHB1dEZpbGU/OiBzdHJpbmcsIG9wdGlvbnM/OiBJT3B0aW9uczxUPilcbntcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0cmV0dXJuIHNlYXJjaEJ5Um9vdChfcm9vdClcblx0XHQudGhlbihmdW5jdGlvbiAobHMpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHByb2Nlc3NEYXRhQnlBdXRob3I8VD4obHMsIF9yb290LCBvcHRpb25zKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uIChkYXRhKVxuXHRcdHtcblx0XHRcdHJldHVybiBzdHJpbmdpZnlEYXRhQXV0aG9yPFQ+KGRhdGEsIF9yb290LCBvcHRpb25zKVxuXHRcdH0pXG5cdFx0LnRhcChmdW5jdGlvbiAodilcblx0XHR7XG5cdFx0XHRpZiAob3V0cHV0RmlsZSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIGZzLm91dHB1dEZpbGUob3V0cHV0RmlsZSwgdik7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRvY1Jvb3RcblxuLy9jcmVhdGVUb2NSb290KCdEOi9Vc2Vycy9Eb2N1bWVudHMvVGhlIFByb2plY3Qvbm9kZWpzLXRlc3Qvbm9kZS1ub3ZlbDIvZGlzdF9ub3ZlbCcpLnRhcCh2ID0+IGNvbnNvbGUuZGlyKHYpKVxuIl19